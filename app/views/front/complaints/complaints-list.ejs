<!-- <?php include('header.php');?> -->
<style>
	.upper {
  text-transform: capitalize;
}
.red_span
{
	color:red;
}
</style>
<%-include('../innerHeader')%>

<section class="heading-sec">
	<div class="container">
		<div class="row align-item-center">
			<div class="col-lg-12">
				<div class="custom-space-btw align-items-center">
					<div class="main-heading-dash">
						<img src="../assets/images/icons/home-assets/complaints.png">
						<h4>Complaint List</h4>
					</div>
					  <%	if(user_type=='client'){%>
					<div>
						<a href="#" class="btn-common-new text-center m-0" data-target="#newComplaint" data-toggle="modal">New Complaint</a>
					</div>
					<%}%>
				</div>
				<div class="custom-space-btw another-drop-down m-top-30 align-items-end">
					<div class="for-select-existing-doc three-drop-custom">
					    <div class="input-group">
							<div class="dropdown keep-inside-clicks-open">
								<h3 class="small-title">Status</h3>
								<button class="dropdwn-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								    All
								</button>
								<div class="dropdown-menu" aria-labelledby="dropdownMenuButton" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 20px, 0px);">
								    <div class="for-doc-select">
								    	<div class="checkbox "> 	
								        	<label>
								          		All
								            	<input type="checkbox" value="" class="all_check">
								            	<span class="cr"><i class="cr-icon fa fa-check"></i></span>
								          	</label>
								        </div>	
									</div>
									<div class="">
								    <div class="for-doc-select">
								    	<div class="checkbox"> 	
								         	<label>
												Pending <input type="checkbox" name="status_check" value="pending"class="checkbox1 ">
									            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
								          	</label>
								        </div>	
								    </div>
									<div class="for-doc-select">
								    	<div class="checkbox "> 	
								        	<label>
												Responded
								            	<input type="checkbox"name="status_check" value="responded" class="checkbox1">
								            	<span class="cr"><i class="cr-icon fa fa-check"></i></span>
								          	</label>
								        </div>	
								    </div>
								</div>
								    
								</div>
							</div>
						</div>
						<!-- one section -->
						<div class="input-group">
							<div class="dropdown keep-inside-clicks-open">
								<h3 class="small-title">MyReflet ID</h3>
								<button class="dropdwn-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								    All 
								</button>
								<div class="dropdown-menu" aria-labelledby="dropdownMenuButton" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 20px, 0px);">
								    <div class="for-doc-select">
								    	<div class="checkbox"> 	
								        	<label>
								          		All 
								            	<input type="checkbox" value="" class="all_check">
								            	<span class="cr"><i class="cr-icon fa fa-check"></i></span>
								          	</label>
								        </div>	
								    </div>
								<%	if(all_reflect_codes.length>0)
									{
									
										for(let each_data of all_reflect_codes){
										  %>
								    <div class="for-doc-select">
									 <div class="checkbox" >
										<label>
										  <%	if(user_type=='client'){
											 if(each_data.user_as=='client')
									 		 {
													%>
												<div class="upper">

                                                <%if(each_data.rep_firstname){%>


														<%= each_data.rep_firstname %> - <%= each_data.reflect_code %>	</div>		
													<input type="checkbox" value="<%= each_data.reflect_code %>"class="checkbox2"name="reflect_code_check">
													  <span class="cr"><i class="cr-icon fa fa-check"></i></span>
										 <%}else if(each_data.entity_company_name){%>

                                         <%= each_data.entity_company_name %> - <%= each_data.reflect_code %>	</div>		
													<input type="checkbox" value="<%= each_data.reflect_code %>"class="checkbox2"name="reflect_code_check">
													  <span class="cr"><i class="cr-icon fa fa-check"></i></span>
										         <%}else{%>
										           <%= decrypt(each_data.full_name) %> - <%= each_data.reflect_code %>	</div>		
													<input type="checkbox" value="<%= each_data.reflect_code %>"class="checkbox2"name="reflect_code_check">
													  <span class="cr"><i class="cr-icon fa fa-check"></i></span>
										           <%}%>

			  
													  <% 
										  }}
										  else
										     {
                                            if(each_data.user_as=='verifier')
											{
											%>
											    
											<div class="upper">
												<%if(each_data.rep_firstname){%>


														<%= each_data.rep_firstname %> - <%= each_data.reflect_code %>	</div>		
													<input type="checkbox" value="<%= each_data.reflect_code %>"class="checkbox2"name="reflect_code_check">
													  <span class="cr"><i class="cr-icon fa fa-check"></i></span>
										 <%}else if(each_data.entity_company_name){%>

                                         <%= each_data.entity_company_name %> - <%= each_data.reflect_code %>	</div>		
													<input type="checkbox" value="<%= each_data.reflect_code %>"class="checkbox2"name="reflect_code_check">
													  <span class="cr"><i class="cr-icon fa fa-check"></i></span>
										         <%}else{%>
										           <%= decrypt(each_data.full_name) %> - <%= each_data.reflect_code %>	</div>		
													<input type="checkbox" value="<%= each_data.reflect_code %>"class="checkbox2"name="reflect_code_check">
													  <span class="cr"><i class="cr-icon fa fa-check"></i></span>
										           <%}%>

										<%}else%>
										<div class="upper"></div>			
										<%}%>
										</label>
									</div>	</div>
									<%
											
							   }
								  }
							  %>
								</div>
							</div>
						</div>

						<!-- second section -->
						<div class="input-group">
							<div class="dropdown keep-inside-clicks-open">
								<h3 class="small-title">Complaint ID</h3>
								<button class="dropdwn-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								    All
								</button>
								<div class="dropdown-menu" aria-labelledby="dropdownMenuButton" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 20px, 0px);">
								    <div class="for-doc-select">
								    	<div class="checkbox "> 	
								        	<label>
								          		All
								            	<input type="checkbox" value=""class="all_check">
								            	<span class="cr"><i class="cr-icon fa fa-check"></i></span>
								          	</label>
								        </div>	
									</div>
									<%	if(all_complaint.data.length>0)
									{
									
										all_complaint.data.forEach(function(each_reflect){%>
									<div class="for-doc-select">
								    	<div class="checkbox "> 	
								        	<label>
												C -<%= each_reflect.complain_id %>
											  <input type="checkbox"name="complain_id_name" value="<%= each_reflect.complain_id %>"class="checkbox3">
											  <span class="cr"><i class="cr-icon fa fa-check"></i></span>
											</label>
										</div>	
									</div>
										<%
									
								   })
									  }%>
								</div>
							</div>
						</div>	
					</div>
					<div>
						<form class="response-search"> 
		                     <div class="input-group search-address-book">
		                                <input type="text" class="form-control autocomplete" id="myInputSearch" placeholder="Search" >
		                        <div class="input-group-append">
		                            <button class="btn btn-search" type="button"><img src="../assets/images/icons/search-black.png"></button>
		                        </div>
		                    </div>
	                  	</form>
					</div>
				</div>
				<div class="personal-info-heading">
					<div class="text-right">
						<a href="javascript:void(0);" onclick="export_table();">							<div class="icon-for-dwnload">		
							<div class="icon-for-dwnload">
								<div class="tooltip fade" data-title="Export Data">
									<img src="../assets/images/icons/dashboard-assets/export.png">
							     	<img class="info-icon" src="../assets/images/icons/dashboard-assets/info-icon.png">
								</div>
							</div>
						</a>
						<a href="javascript:void(0);" onclick="print_table();">
							<div class="icon-for-dwnload">
								<div class="tooltip fade" data-title="Print Data">
									<img src="../assets/images/icons/dashboard-assets/print.png">
								    <img class="info-icon" src="../assets/images/icons/dashboard-assets/info-icon.png">
								</div>
							</div>
						</a>
					</div>
				</div>
			</div>
			<div class="col-lg-12" id="div_data">
				<div class="personal-info-box table-responsive another-table">
					<table class="table" id="myTable3">
						<thead>
					    	<tr> 
<!-- 				                       <th scope="col">No.
 -->
						      	<th scope="col">Complaint ID</th>
						      	<th scope="col">Date</th>
						      	<th scope="col"><% if(user_type=='client'){%>Verifier<%}else{%>Client<%} %></th>
						      	<th scope="col">Message</th>
						      	<th scope="col">MyReflet ID</th>
								<th scope="col">Status</th>
								<th scope="col" class="hide_link"><% if(user_type=='client'){%>View<%}else{%>Action<%} %></th>

									  	
					    	</tr>
					  	</thead>
						<tbody id="myTableContent">
							<%
							if(all_complaint.data.length>0)
							{
			                      var k=1;
								all_complaint.data.forEach(function(each_reflect){
						   %>
						    
						    
						    <tr class="content_search">
<!-- 						    	<td><%=k%>.</td>
 -->						    	<td class="upper" >C -<%= each_reflect.complain_id %></td>
								<td class=""><%=moment(each_reflect.created_at).format('MMM DD, YYYY')%></td>
							    <td class="upper">
							    	<%
									  if(user_type=='client')
									  {
									  	%>
	                              <%if(each_reflect.rep_firstname){%>								

									  	<span class="font-w-600"><%= each_reflect.rep_firstname%> </span> <br> <%= each_reflect.reflect_code %>
									  <%}else if(each_reflect.entity_company_name){%>
                                               
									  	<span class="font-w-600"><%= each_reflect.entity_company_name%> </span> <br> <%= each_reflect.reflect_code %>
                                                         <%}%>
									  
									  	<%
									  }
									  else
									  {
									  	%>
									  		<span class="font-w-600">
										<%= each_reflect.client_reflect_name %>
										</span> <br><%= each_reflect.client_reflect_code %> 
									  	<%
									  }
									%>
							    </td>
								<td class=""><%= each_reflect.complain_message%></td>
								<td class="upper">

									<%
									  if(user_type=='client')
									  {
									  	%>

									  	<span class="font-w-600">
										<%= each_reflect.client_reflect_name %>
										</span> <br><%= each_reflect.client_reflect_code %> 
									  	<%
									  }
									  else
									  {
									  	%>
							<!-- 		  	<span class="font-w-600"><%= each_reflect.rep_firstname%> </span> <br> <%= each_reflect.reflect_code %> -->

									  	<%if(each_reflect.rep_firstname){%>								

									  	<span class="font-w-600"><%= each_reflect.rep_firstname%> </span> <br> <%= each_reflect.reflect_code %>
									  <%}else if(each_reflect.entity_company_name){%>
                                               
									  	<span class="font-w-600"><%= each_reflect.entity_company_name%> </span> <br> <%= each_reflect.reflect_code %>
                                                         <%}%>
									  	<%
									  }
									%>
									

								</td>
							    <td class=""> 
								    	<%if( each_reflect.complaint_status==="pending"){%>

	                                   <span class="clr-green">Pending</span>
	                                   <%}else if( each_reflect.complaint_status==="responded"){%>
	                                       <span class="clr-purple">Responded</span>
	                                   <%}%>
							    </td>
							    <td>

                                       
									<% if(user_type=='client')
									  {
									  	%>

									  <a href="/complaint-details/:<%= each_reflect.complain_id %>" class="view-img click_eye"><img class="hide_link" src="../assets/images/icons/dashboard-assets/icon_view.png" alt="eye"></a>
									  	<%
									  }
									  else
									  {
									  	%>
							    	<div class="dropdown-menu-new">
				                        <a class="nav-link dropdown-toggle" id="profileDropdown" href="#" data-toggle="dropdown" aria-expanded="false">
				                          <div class="doc-img">
									      		<img src="../assets/images/icons/dashboard-assets/menu.png">
									      	</div>
				                        </a>
				                        <div class="dropdown-menu" aria-labelledby="profileDropdown">
				                            <a class="dropdown-item click_eye" href="/complaint-details/:<%= each_reflect.complain_id %>"  >
				                            	<img src="../assets/images/icons/dashboard-assets/view.png"> Manage Requests
				                            </a>
							               <%if(each_reflect.complaint_status==="pending"){%>
											<a class="dropdown-item" href="/complaint-resolved-and-closed?complain_id=<%= each_reflect.complain_id %>">
												<img src="../assets/images/icons/verifier-home-assets/reject-grey.png"> Resolved & Closed
											</a>
											<%}%>


				                        </div>
				                    </div>
							      	 <%}
									  	%>
								  </td>
								  
									
						    </tr>
							<%
							k++;
						});
					}
						else{
	   %>
                       <tr>
						<td colspan="8"><center>No record found.</center> </td>
					   </tr>			 <%}%>
					    
						</tbody>
					
					</table>
							<div class="pagination-list for-user">
          
						<% if (all_complaint.totalPages > 0) { %>
					   <ul class="pagination text-center">
						   <% if (all_complaint.currentPage == 1) { %>
							   <li class="disabled page-item"><a class="page-link">&lt;</a></li>
						   <% } else { %>
							   <li class="page-item"><a class="page-link" href="/complaint-list?page=1">&lt;</a></li>
						   <% } %>
					
					
					
						   <% var i = (Number(all_complaint.currentPage) > 5 ? Number(all_complaint.currentPage) - 4 : 1) %>
						   <% if (i !== 1) { %>
							   <!-- <li class="disabled"><a>...</a></li> -->
							   <li class="page-item disabled"><a class="page-link" >...</a></li>
						   <% } %>
						   <% for (; i <= (Number(all_complaint.currentPage) + 4) && i <= all_complaint.totalPages; i++) { %>
							   <% if (i == all_complaint.currentPage) { %>
								   <!-- <li class="active"><a><%= i %></a></li> -->
								   <li class="page-item active">
									 <a class="page-link" href="#"><%= i %><span class="sr-only">(all_complaint.currentPage)</span></a>
								   </li>
							   <% } else { %>
								   <li class="page-item"><a class="page-link" href="/complaint-list?page=<%= i %>"><%= i %></a></li>
							   <% } %>
							   <% if (i == Number(all_complaint.currentPage) + 4 && i < all_complaint.totalPages) { %>
								   <!-- <li class="disabled"><a>...</a></li> -->
								   <li class="page-item disabled"><a class="page-link" >...</a></li>
							   <% } %>
						   <% } %>
					
					
						   <% if (all_complaint.currentPage == all_complaint.totalPages) { %>                       
							   <li class="disabled page-item"><a class="page-link">&gt;</a></li>
						   <% } else { %>
							   <li><a class="page-link" href="/complaint-list?page=<%= all_complaint.totalPages %>">&gt;</a></li>
						   <% } %>
					
					   </ul>
					<% } %>
					
					 </div>
				</div>
			</div>
		</div>
	</div>
</section>
<!-- Modal S -->
 
 <div class="modal fade field-edit-modal close" id="newComplaint" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <button type="button" class="close hide_btn" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <div class="create-wallet-box">
			<div class="row align-item-center">
				<div class="col-xl-2 col-lg-3 col-md-3">
					<div>
						<img src="../assets/images/icons/createidentity-assets/popup-set-doc-permission-icon.png">
					</div>
				</div>
				<div class="col-xl-7 col-lg-7 col-md-7">
					<h5 class="heading-purple">New Complaint</h5>
				</div>
			</div>

			<div class="row">
				<div class="col-xl-12 col-lg-12 col-md-12 m-auto">
					<div class="setup-inner-box for-protact pt-15">
						<span class="success_message_span success_span"style="color:red"></span>

						<div class="create-rflet-id-form">
							<div class="without_addbook_reflet_code">

								<div class="form-group select-verifier-box  m-top-40">
								<Label>Verifier Code</Label>
						    	<div class="input-group">
								  <div class="dropdown d1">
									  <button class="dropbtn dropbtn_1" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									    Select Verifiers Via Code<span style="color:red">*</span>
									  </button>
									  <div class="dropdown-menu menu-for-id" aria-labelledby="dropdownMenuButton">
										<%	if(verifier_user.length>0)
										{
											 
											for(var i=0;i< verifier_user.length;i++ ){
											  %>
									    <a class="dropdown-item" href="#">
									    	<div class="for-verify-box-inner for-pending">
													
												<%	if(verifier_user[i].user_as=='verifier'){%>
									    		<i class="fas fa-check"></i>
									    		<span class="user-img-verify">
													<%if(verifier_user[i].profile_pic){
                                                          %>
                                                <img class=" " src="<%= verifier_user[i].profile_pic%>"width="30px"height="30px">
                                                                            <%}else{%>
                                                <img  class=""src="/admin-assets/images/user-icon.jpg"width="30px"height="30px">

                                                    <%}%>
									    		</span>

													<%if(verifier_user[i].rep_firstname){%>								
                                         <span class="upper"><%=verifier_user[i].rep_firstname %></span>	
												 <%}else{%>
										<span class="upper"><%=verifier_user[i].entity_company_name %></span>                                <%}%>
												<input type="hidden" class="getId1" id="t1" value="<%=verifier_user[i].reflect_id %>">
												<span class="">
															<%=verifier_user[i].reflect_code %>

											  </span>
											  <span class="desc_error" style="font-size:13px;color:red;"></span>

											<%
									
										}
						  
										  
									  %>
										
									</div>
								</a>
								<%
							}
			  
							  }
						  %></div>
									
									  </div>
									  <div class="input-group-append">
										<button class="btn address-book address_book_filter" type="button">Address Book</button>
									  </div>
									</div>

								</div>
							</div>
						  <div id="address_book_append">
						    </div>

								
							<div class="form-group select-verifier-box  m-top-40">
								<Label>Client Code</Label>
						     	<div class="input-group">
								  <div class="dropdown d2">
									  <button class="dropbtn dropbtn_2" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									     Select Client Via Code<span style="color:red">*</span>
									  </button>
									  <div class="dropdown-menu menu-for-id dropbtn2" aria-labelledby="dropdownMenuButton">

										<%	if(all_reflect_codes.length>0)
										{
											 
											for(var i=0;i< all_reflect_codes.length;i++ ){
											  %>
									    <a class="dropdown-item" href="#">
									    	<div class="for-verify-box-inner for-pending"id="">
												
												<%	if(all_reflect_codes[i].user_as=='client'){%>
									    		<i class="fas fa-check"></i>
									    		<span class="user-img-verify">
													<%if(all_reflect_codes[i].profile_pic){
                                                          %>
                                                <img class=" " src="<%= all_reflect_codes[i].profile_pic%>"width="30px"height="30px">
                                                                            <%}else{%>
                                                <img  class="" src="/admin-assets/images/user-icon.jpg"width="30px"height="30px">
                                                    <%}%>
												</span>
										   
												<span class="upper">
                                                <%if(all_reflect_codes[i].rep_firstname){%>
													<%=all_reflect_codes[i].rep_firstname %></span>
														<input type="hidden"class="get_name"value="<%=all_reflect_codes[i].rep_firstname %>">

										   	<input type="hidden"class="getId2"value="<%=all_reflect_codes[i].reflect_code %>">
                                            <span class="">
												<%=all_reflect_codes[i].reflect_code %>
											</span>
											 <%}else if(all_reflect_codes[i].entity_company_name){%>

										<%=all_reflect_codes[i].entity_company_name %></span>
														<input type="hidden"class="get_name"value="<%=all_reflect_codes[i].entity_company_name %>">
                                                
										   	<input type="hidden"class="getId2"value="<%=all_reflect_codes[i].reflect_code %>">
										   	 <span class="">
												<%=all_reflect_codes[i].reflect_code %>
											</span>

										   	<%}else{%>
                                                <%= decrypt(all_reflect_codes[i].full_name) %></span>
														<input type="hidden"class="get_name"value="<%=all_reflect_codes[i].full_name %>">
                                                
										   	<input type="hidden"class="getId2"value="<%=all_reflect_codes[i].reflect_code %>">
										   	 <span class="">
												<%=all_reflect_codes[i].reflect_code %>
											</span>
										  <%}
									
										}
						  
										  
									  %>
										
									</div>
								</a>
								<%
							}
			     
							  }
						  %>
									    
							</div>  
									</div>
									</div>
								</div>
						    </div>


						    <!-- soniya upper -->





	
							<div class="form-group for-verify-text m-top-40">
								<label for="">Enter Your Message<span style="color:red">*</span></label>
								<textarea class="form-control" rows="7" placeholder="Message"id="comment"></textarea>
							</span>
							</div>
						</div>
						<div >
							<a href="#" class="btn-common-new  hide_btn" id="reflect_code">Submit</a>
							<a class="btn-common-new all_check hide_btn" href="">Cancel</a>
							<center><span class="loader"><img src="../assets/images/loader-3.gif"height="22" width="52"></span></center> 
						</div>
					</div>
				</div>
			 </div>
	 	  </div>
       </div>
    </div>
  </div>
</div> 
<!-- Modal E -->

<%- include('../innerFooter')%>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css">
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css">
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
<script src="https://cdn.rawgit.com/rainabba/jquery-table2excel/1.1.0/dist/jquery.table2excel.min.js"></script>

<script>
$(document).ready( function () {
	$('.loader').hide();

	$('.table').DataTable();
			$('.hide_data').hide();

} );
</script>
<script>
	$(document).on('click.bs.dropdown.data-api', '.dropdown.keep-inside-clicks-open', function (e) {
	  e.stopPropagation();
	});
</script> 
<script>
	var getVerifierID,getClientID,getClientName

   $('.d1').on('click', '.menu-for-id a', function() {
	   $('.dropbtn_1').html($(this).html()); 

	//   var lastID = $(this).html();
	   getVerifierID = $(this).find(".getId1").attr("value");
		// console.log("text", lastID); 
// alert(getVerifierID)

   });
   function get_reflect_id(id)
   {
	getVerifierID =id;
	// alert(getVerifierID)

   }
//    $('.d1').on('click', '.menu-for-id-b a', function() {
// 	   $('.dropbtn_1').html($(this).html()); 

// 	//   var lastID = $(this).html();
// 	   getVerifierID = $(this).find(".getId1").attr("value");
// 		// console.log("text", lastID); 
// alert(getVerifierID)

//    });

   
   $('.d2').on('click', '.menu-for-id a', function() {
	   $('.dropbtn_2').html($(this).html()); 

	//   var lastID = $(this).html();
	
	getClientID = $(this).find(".getId2").attr("value");
	getClientName = $(this).find(".get_name").attr("value");
		// alert(getClientID)
		// alert(getClientName)

		// console.log("text", lastID); 

   });
 
   
		
    
	

	// }
		// ##################### Add complaint #######################
$('#reflect_code').click(function()
	{
		
		var select_text= $("#text_code").val()
        var verifier_reflect_id;
		var client_reflect_id;
		$("#dropbtn_text").text()

     var complain_message=$.trim($("#comment").val());
	// alert(getVerifierID)
  
         if(complain_message==''||getVerifierID==''||getClientID==''||getVerifierID===undefined)
        {
		    
			$('.success_span').html('<h6>All the fields required</h6>');
           
				return false;

	   }
	 
	   setTimeout(function() {
			    $('.success_message_span').fadeOut('fast');
				}, 3000);

				$('.hide_btn').hide();

              $('.loader').show();
				

				$.ajax({
			type: "post",
			url: "/complaint-submit",
			data:{verifier_reflect_id:getVerifierID,client_reflect_id:getClientID,client_reflect_name:getClientName,complain_message:complain_message},
			success: function (data) {
				
				location.reload();

			
			}
		});
	})

	// ##################### Search By Status #######################
	$('.checkbox1').click(function() {
		// var userid = `${ userid}`
		// $('.complaints_by_status_list').html(" ")
		$(".all_list").hide();

    var status_list = $('input[name=status_check]:checked').map(function(_, el) {
        return $(el).val();
	}).get();
	if(status_list=='')
	{
		$(".complaints_by_status_list").hide();

		window.location.reload(true);

	}
    console.log("check box select value : ",status_list) 
	$.ajax({
                      type : 'POST',
                      url  : '/show-complaints-by-status',
					  data: {status_list:JSON.stringify(status_list)},
					  
                        success: function(data) {
							$('#div_data').html("");
			            	$('#div_data').html(data);
						
			}                                                    
           
})
})
// ************** Search by reflect ID **********************
$('.checkbox2').click(function() {
		// var userid = `${ userid}`
		$('.complaints_by_reflect_codes').html(" ")

    var reflect_code_list = $('input[name=reflect_code_check]:checked').map(function(_, el) {
        return $(el).val();
	}).get();
	if(reflect_code_list=='')
	{
		$(".complaints_by_reflect_codes").hide();

		window.location.reload(true);

	}
    // console.log("check box select value : ",reflect_code_list) 
	$.ajax({
                      type : 'POST',
                      url  : '/show-complaints-by-reflect-code',
					  data: {reflect_code_list:JSON.stringify(reflect_code_list)},
					  
                        success: function(data) {
							$('#div_data').html("");
			            	$('#div_data').html(data);
						
			}                                                    
           
})
})
                
// ************** Search by reflect ID **********************
$('.checkbox3').click(function() {
		// var userid = `${ userid}`
		$('.complaints_by_complain_id').html(" ")

    var complain_list = $('input[name=complain_id_name]:checked').map(function(_, el) {
        return $(el).val();
	}).get();
	// alert(complain_list)
	if(complain_list=='')
	{
		$(".complaints_by_complain_id").hide();

		window.location.reload(true);

	}
    console.log("check box select value : ",complain_list) 
	$.ajax({
                      type : 'POST',
                      url  : '/show-complaints-by-complain-id',
					  data: {complain_list:JSON.stringify(complain_list)},
					  
                        success: function(data) {
						

							$('#div_data').html("");
			            	$('#div_data').html(data);
					   
					
			}                                                    
           
})
})
                

</script>

<script>
	$("#search").on("keyup", function() {
  var value = $(this).val().toLowerCase();
  $("#table tr").filter(function() {
    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
  });
});
	$(document).ready( function () {

		  $("#myInputSearch").on("keyup", function() {

            var value = $(this).val().toLowerCase();
            // alert(value)
            if(value){
            $.ajax({
		type: "post",
		url: "/search-complaint",
		data:{query:value},
		success: function (data) {
			// alert(data);
			
			     $('#div_data').html("");
			            	$('#div_data').html(data);
						
			
	
		
		}
	})
}else{location.reload(true)}
	})
		     $("#myInputSearch8").on("keyup", function() {
		// alert('h')
							
        var check_search=0;
		var value = $(this).val().toLowerCase();
		// alert(value)
        $("#myTableContent tr").filter(function() {
			// alert($(this).text().toLowerCase().indexOf(value)===-1)
			var check=($(this).text().toLowerCase().indexOf(value)===-1);
			$(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)

	  if(check===false)
	  {
		check_search++;
		$('.tr_search').hide();

	  }
		
		}); 
		// alert(check_search)
		if(check_search==0)
		{
			$('.search_tr').hide();

			$('.tr_search').show();

		}

		// else
		// {
		// 	$('.search_tr').show();

		// 	$('.tr_search').hide();

		// }
      });
		$('.all_check').click(function()
		{
			// alert('all')
			window.location.reload(true);

		})
   
	  

	 });
	 

		$('#myTable1').hide();
	
		$('.table').DataTable();
	
	
	function export_table(){
	//   alert('hhh')
	// $('.hide_link').show();

	  $("#myTable3").table2excel({
		  filename: "complaint-list.xls",
		  exclude:'.hide_link',
	  });
	//   $('.hide_link').show();
	window.location.reload(true);

	};
	
	function print_table(){
		$('.hide_link').hide();
     
     // $("#user_div").print();
     var restorepage = $('body').html();
  // $('.nodata').hide();
   var printcontent = $('#myTable3').clone();
   $('body').empty().html(printcontent);
   window.print();
   $('body').html(restorepage);
 
   window.location.reload(true);

		}   
</script>
<script>
 $('.address_book_filter').click(()=>{
// alert('addEventListener')
$('.without_addbook_reflet_code').hide();

$.ajax({
                      type : 'POST',
                      url  : '/show-verifier-by-addbook',
					//   data: {user_id:user_id},
					  
                        success: function(data) {
							// alert(data)
							$('#address_book_append').html("");
			            	$('#address_book_append').html(data);
						}
					})
 })

</script>
<script type="text/javascript">
	$('.create_complaint').click(()=>{
        
        $('.hide_btn').hide();

		$('.loader').show();

	})
	 setTimeout(function() {
						    $('.flash_msg').fadeOut('fast');
							}, 3000);

	$('.click_eye').click(()=>{
					   // $('.hide_btn').hide();

					   $('.loader-box').show();

   })
</script>