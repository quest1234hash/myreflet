<%-include('../innerHeader')%>

<section class="heading-sec">
	<div class="container">
		<div class="row align-item-center">
			<div class="col-lg-12">
				<div class="row personal-info-heading">
					<div class="col-xl-6 col-lg-12 col-md-12 col-sm-12">
						<div class="main-heading-dash">
							<img src="../assets/images/icons/marketplace-assets/other-verifiers-grey.png">
							<h4>Reflect Report</h4>
						</div>
					</div>
					<div class="col-xl-6 col-lg-12 col-md-12 col-sm-12 text-right">
						<a href="#save-report" data-toggle="modal"  class="btn-common-new">Save</a>
						<a href="javascript:void(0)" onclick="run_query()" class="btn-common-new">Run</a>
						<a href="my-reports-list" class="btn-common-new">Close</a>
					</div>
				</div>

				<div class="custom-space-btw align-items-center m-bottom-30 personal-info-heading">
					<form class="">
                      <div class="input-group search-address-book">
            <input type="text" class="form-control autocomplete" id="myInputSearch" placeholder="Search" >
                          <div class="input-group-append">
                              <button class="btn btn-search" type="button"><img src="../assets/images/icons/search-black.png"></button>
                          </div>
                      </div>
                  	</form>
					<div class="text-right">
						<a href="javascript:javascriptvoid(0)" class="nodata">
							<div class="icon-for-dwnload">
								<div class="tooltip fade" data-title="Export Data"onclick="xl_data()">
									<img src="../assets/images/icons/dashboard-assets/export.png">
							     	<img class="info-icon" src="../assets/images/icons/dashboard-assets/info-icon.png">
								</div>
							</div>
						</a>
						<a class="nodata" id="" onclick="printdiv()">
							<div class="icon-for-dwnload">
								<div class="tooltip fade" data-title="Print Data">
									<img src="../assets/images/icons/dashboard-assets/print.png">
								    <img class="info-icon" src="../assets/images/icons/dashboard-assets/info-icon.png">
								</div>
							</div>
						</a>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-xl-3 col-lg-5 col-md-6 col-sm-6">
				<div class="filter-tabs-wrapper tab-content">
					<div class="align-item-center another-tabs-wrapper">
						<ul class="nav nav-tabs all-doc-tabs" id="myTab" role="tablist">
						  	<li class="nav-item">
						    	<a class="nav-link active show" id="doc1" data-toggle="tab" href="#doc-tab1" role="tab" aria-controls="doc-tab1" aria-selected="false">Columns</a>
						  	</li>
						  	<li class="nav-item">
						    	<a class="nav-link" id="doc2" data-toggle="tab" href="#doc-tab2" role="tab" aria-controls="doc-tab2" aria-selected="false">Filters</a>
						  	</li>
						</ul>
					</div>
					<div class="add-column-wrapper tab-pane fade show active" id="doc-tab1" role="tabpanel" aria-labelledby="doc1">
						<form>
	                      	<div class="input-group search-address-book">
	                         	<input type="text" class="form-control autocomplete" id="myInput" placeholder="Add column..." onkeypress="autoSearch(this);">
		                        <div class="input-group-append">
		                            <button class="btn btn-search" type="button"><img src="../assets/images/icons/search-black.png"></button>
		                        </div>
	                      </div>
	                  	</form>
	                  	<div>
	                  		<div id="get_column">
								  <!-- <input type="hidden" value="<%=market_list_result[0].report_id%>"> -->
			            		<ul>
			            			<!-- <li>
			            				<div class="checkbox">
								          	<label>
									            <input type="checkbox" name="column_check" value="rep_emailid">
									            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                                Email
								         	</label>
			        					</div>
			        					<span class="close-filter">X</span>
			        				</li> -->
			        				<li>
			            				<div class="checkbox">
								          	<label>
									            <input type="checkbox" name="column_check" value="reflectid_by">
									            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                                MyReflet Type
								         	</label>
			        					</div>
			        					<span class="close-filter">X</span>
			        				</li>
			        				<li>
			            				<div class="checkbox">
								          	<label>
									            <input type="checkbox" name="column_check" value="rep_firstname">
									            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
							      		     	Name
								         	</label>
			        					</div>
			        					<span class="close-filter">X</span>
			        				</li>
			        				<li>
			            				<div class="checkbox">
								          	<label>
									            <input type="checkbox" name="column_check" value="reflect_code">
									            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                                MyReflet Code
								         	</label>
			        					</div>
			        					<span class="close-filter">X</span>
			        				</li>
			        				<li>
			            				<div class="checkbox">
								          	<label>
									            <input type="checkbox" name="column_check" value="country">
									            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
							      		     	Country
								         	</label>
			        					</div>
			        					<span class="close-filter">X</span>
			        				</li>
			        				<li>
			            				<div class="checkbox">
								          	<label>
									            <input type="checkbox" value="status"name="column_check">
									            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
							      		     	Status
								         	</label>
			        					</div>
			        					<span class="close-filter">X</span>
			        				</li>
				            	</ul>
				            </div>
	                  	</div>
					</div>
					<div class="add-column-wrapper tab-pane fade" id="doc-tab2" role="tabpanel" aria-labelledby="doc2">
				  	 	<div class="show-me-filter mt-20">
				  	 		<div id="addFilter" class="drop-down-wrapper">
                      			<p>Add Filter
                      			<img src="../assets/images/icons/search-black.png">
                      			</p>
                      		</div>
                      		<div class="filter-custom-dropdown hide-custom">
	                  			<ul>
	                  				<li>
			            				<label class="font-w-600">Add Filter</label>
			        					<span class="close-filter">X</span>
			        				</li>
	                  			</ul>
	                  			<div id="">
				            		<ul>
				            			<!-- <li>
				            				<div class="checkbox">
									          	<label>
										            <input type="checkbox"name="filter_checkbox"class="filterList" value="Email">
										            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
								      		     	Email
									         	</label>
				        					</div>
				        				</li> -->
				        				<li>
				            				<div class="checkbox">
									          	<label>
										            <input type="checkbox"name="filter_checkbox"class="filterList" value="Type">
										            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
								      		     	MyReflet Type
									         	</label>
				        					</div>
				        				</li>
				        				<li>
				            				<div class="checkbox">
									          	<label>
										            <input type="checkbox"name="filter_checkbox"class="filterList"value="Name">
										            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
								      		     	Name
									         	</label>
				        					</div>
				        				</li>
				        				<li>
				            				<div class="checkbox">
									          	<label>
										            <input type="checkbox"name="filter_checkbox"class="filterList" value="MyReflet ID">
										            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
								      		     	MyReflet ID
									         	</label>
				        					</div>
				        				</li>
				        				<li>
				            				<div class="checkbox">
									          	<label>
										            <input type="checkbox"name="filter_checkbox"class="filterList" value="Country">
										            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
								      		     	Country
									         	</label>
				        					</div>
				        				</li>
				        				<li>
				            				<div class="checkbox">
									          	<label>
										            <input type="checkbox" value="Status"name="filter_checkbox"class="filterList">
										            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
								      		     	Status
									         	</label>
				        					</div>
				        				</li>
					            	</ul>
				            	</div>
	                  		</div>
              			</div>
                    <!--   	<div class="show-me-filter mt-20">
                      		<div class="drop-down-wrapper">
                      			<span>Show Me</span>
	                  			<p>All Clients</p>
                      		</div>
	                  		<div class="filter-custom-dropdown hide-custom">
	                  			<ul>
	                  				<li>
			            				<label class="font-w-600">Edit Filter</label>
			        					<span class="close-filter">X</span>
			        				</li>
	                  			</ul>
	                  			<div class="setup-inner-box for-protact p-0">
		                  			<div class="create-rflet-id-form">
			                  			<div class="form-group for-select-existing-doc">
									    	<div class="input-group">
				                  				<div class="dropdown keep-inside-clicks-open">
													<button class="dropdwn-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
												    Show ME
												  	</button>
												  	<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
												    	<div class="for-doc-select">
												    		<div class="checkbox"> 	
												          		<label>
												          			All Clients
													            	<input type="checkbox" value="">
													            	<span class="cr"><i class="cr-icon fa fa-check"></i></span>
												          		</label>
												        	</div>	
												     	</div>
												      	<div class="for-doc-select">
												    		<div class="checkbox"> 	
												          		<label>
												          			My Clients
												            		<input type="checkbox" value="">
												            		<span class="cr"><i class="cr-icon fa fa-check"></i></span>
												          		</label>
												        	</div>	
												     	</div>
												  	</div>
												</div>
											</div>
										</div>
									</div>
								</div>
	                  		</div>
	                  	</div> -->
						  <div class="show-me-filter mt-20">
							<div class="drop-down-wrapper">
								<span>Created Date</span>
								<p class="create_class"> </p>
							</div>
					
							<div class="filter-custom-dropdown hide-custom">
							  <ul>
								  <li>
									<label class="font-w-600">Filter by Date </label>
									<span class="close-filter">X</span>
								</li>
							  </ul>
							  <div class="setup-inner-box for-protact p-0">
								  <div class="create-rflet-id-form">
									  <div class="form-group for-select-existing-doc">
										<div class="input-group">
											  <div class="dropdown keep-inside-clicks-open">
												<button class="dropdwn-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
												Date
												  </button>
												  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
													<div class="for-doc-select">
														<div class="checkbox"> 	
															  <label>
																  Created Date
																<input type="checkbox" value="created"name="check_date">
																<span class="cr"><i class="cr-icon fa fa-check"></i></span>
															  </label>
														</div>	
													 </div>
													  <div class="for-doc-select">
														<div class="checkbox"> 	
															  <label>
																  Last Modified Date
																<input type="checkbox" value="updated"name="check_date">
																<span class="cr"><i class="cr-icon fa fa-check"></i></span>
															  </label>
														</div>	
													 </div>
												  </div>
											</div>
										</div>
									</div>
									<div class="form-group">
										<!-- <div class="input-group">
										  <input type="text" id="range" class="form-control" placeholder="Range">
										</div> -->
									</div>
									<div class="form-group">
										<div class="input-group">
										  <input type="text" id="start-date" class="form-control startDate" placeholder="Start Date">
										</div>
									</div>
									<div class="form-group">
										<div class="input-group">
										  <input type="text" id="end-date" class="form-control endDate"  placeholder="End Date">
										</div>
									</div>
									<div class="text-right">
										<button class="btn-common-new small-btn close-filter date_apply">Apply</button>	
									</div>
									
								</div>
							</div>
						  </div>
						</div>
					
						<div id="appendFilter">
						  <div>
						  <div id="rowMatching" class="show-me-filter mt-20 filter-remove-bdr" style="display: block;">
							  <div class="">
								  <span>Includes Row Matching</span>
								  <p class="tabWrapper drop-down-wrapper1">1 AND ((2 OR 3) OR (4 AND 5)) <i class="fas fa-pencil-alt"></i></p>
							  </div>
							  <div class="filter-custom-dropdown hide-custom">
								  <ul>
									  <li>
										<label class="font-w-600">Edit Filter Logic</label>
										<span class="close-filter">X</span>
									</li>
								  </ul>
								<div class="edit-logic">
									<p>1 AND ((2 OR 3) OR (4 AND 5))</p>
								</div>	
								<div class="tabWrapper mt-15">
									<button class="btn-common-new small-btn close-filter1">Remove</button>	
									<button class="btn-common-new small-btn close-filter1">Apply</button>	
								</div>
							  </div>
						  </div>
					  </div>
					  <div>
						  <!--Email Id  -->
						  <div class="show-me-filter mt-20 main-heading-dash " id="email_id_filter">
							  <div class="drop-down-wrapper edit-filter-new-change main-heading-dash width-full">
								  <label class="font-w-600"> Email Id</label>
								  <div class="setup-inner-box for-protact p-0">
									  <div class="create-rflet-id-form">
										  <div class="form-group for-select-existing-doc">
											  <div class="input-group">
												  <div class="dropdown keep-inside-clicks-open">
													  <button class="dropdwn-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select Email</button>
													  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
														<%if(reflet_id_data){
															for(let client of reflet_id_data){    
															%>
														<div class="for-doc-select ">
															<div class="checkbox"> 	
																<label ><%=client.rep_emailid%>
																	<input type="checkbox" value="<%=client.rep_emailid%>"name="email_id_name"class="email_id_class">
																	<span class="cr"><i class="cr-icon fa fa-check"></i></span></label>
															</div>
														</div>
														<%}}%>
													  </div>
												  </div>
											  </div>
										  </div>
									  </div>
								  </div>
							  </div>
						  </div>
						 <!-- Type -->
						  <div class="show-me-filter mt-20 main-heading-dash"id="type_filter">
							<div class="drop-down-wrapper edit-filter-new-change main-heading-dash width-full">
								<label class="font-w-600"> 
								  MyReflet Type
								</label>
								<div class="setup-inner-box for-protact p-0">
									<div class="create-rflet-id-form">
										<div class="form-group for-select-existing-doc">
											<div class="input-group">
												<div class="dropdown keep-inside-clicks-open">
													<button class="dropdwn-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select Type</button>
													<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
													  <div class="for-doc-select">
														  <div class="checkbox"> 	
															   <label>
																  Representative <input type="checkbox" value="representative"class="type_class"name="type_name">
																  <span class="cr"><i class="cr-icon fa fa-check"></i></span>
																</label>
														  </div>	
													  </div>
													  <div class="for-doc-select">
														  <div class="checkbox"> 	
															   <label>
																  Entity
																  <input type="checkbox" value="entity"class="type_class"name="type_name">
																  <span class="cr"><i class="cr-icon fa fa-check"></i></span>
																</label>
														  </div>	
													  </div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						  </div>	
					   <!-- Name -->

						<div class="show-me-filter mt-20 main-heading-dash"id="name_filter">
							<div class="drop-down-wrapper edit-filter-new-change main-heading-dash width-full">
								<label class="font-w-600"> Name</label>
								<div class="setup-inner-box for-protact p-0">
									<div class="create-rflet-id-form">
										<div class="form-group for-select-existing-doc">
											<div class="input-group">
												<div class="dropdown keep-inside-clicks-open">
													<button class="dropdwn-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select Name</button>
													<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
														<%if(reflet_id_data){
															for(let client of reflet_id_data){    
															%>


														<div class="for-doc-select">
															<div class="checkbox"> 	
																    <%if(client.rep_firstname){%>

                                       <label><%=client.rep_firstname%><input class="name_class" type="checkbox" value="<%=client.rep_firstname%>"name="name_name"><span class="cr"><i class="cr-icon fa fa-check"></i></span></label>
                                         <input type="hidden" id="name_type"value="rep">

                                        <%}else if(client.entity_company_name){%>

                                        <label><%=client.entity_company_name%><input class="name_class" type="checkbox" value="<%=client.entity_company_name%>"name="name_name"><span class="cr"><i class="cr-icon fa fa-check"></i></span></label>                          
                                          <input type="hidden" id="name_type"value="entity">
                <%}%>
															</div>
														</div>
														<%}}%>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						 <!-- MyReflet ID -->
						 
					  <div class="show-me-filter mt-20 main-heading-dash"id="reflet_id_filter">
					  <div class="drop-down-wrapper edit-filter-new-change main-heading-dash width-full">
						  <label class="font-w-600"> 
						  MyReflet ID
						  </label>
						  <div class="setup-inner-box for-protact p-0">
							  <div class="create-rflet-id-form">
								  <div class="form-group for-select-existing-doc">
									  <div class="input-group">
										  <div class="dropdown keep-inside-clicks-open">
											  <button class="dropdwn-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select MyReflect ID</button>
											  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
												  <%if(my_client_user){
													  for(let client of my_client_user){    
													  %>
									  
						  <div class="for-doc-select">
							  <div class="checkbox"> 	
									  <label>
										      <%if(client.rep_firstname){%>
                                        <span class="font-w-600">											  <%= client.rep_firstname%> - <%= client.reflect_code %>
                                             </span>
                                        <%}else if(client.entity_company_name){%>
                                         <%= client.entity_company_name%> - <%= client.reflect_code %>
                                          <%}%>
										  </span> 

										  <input type="checkbox" value="<%= client.reflect_code %>"class="reflet_class"name="reflect_code_name"><span class="cr">
										  <i class="cr-icon fa fa-check"></i></span></label>
							  </div>
						  </div>		
												  <%}}%>
											  </div>
										  </div>
									  </div>
								  </div>
							  </div>
						  </div>
					  </div>
				  </div>
						 <!--Country -->
						 
				  <div class="show-me-filter mt-20 main-heading-dash "id="country_filter">
				  <div class="drop-down-wrapper edit-filter-new-change main-heading-dash width-full">
					  <label class="font-w-600"> Country</label>
					  <div class="setup-inner-box for-protact p-0">
						  <div class="create-rflet-id-form">
							  <div class="form-group for-select-existing-doc">
								  <div class="input-group">
									  <div class="dropdown keep-inside-clicks-open">
										  <button class="dropdwn-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select Country</button>
										  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
										  <%if(country_list){
											  for(let client of country_list){    
											  %>
							  
											  <div class="for-doc-select">
												  <div class="checkbox"> 	
														  <label>
															  <span class="font-w-600">
																  <%= client.country_name%>
																  </span><input type="checkbox" value="<%= client.country_id%>"class="country_class"name="country_name"><span class="cr">
															  <i class="cr-icon fa fa-check"></i></span>
														  </label>
												  </div>
											  </div>		
										  <%}}%>
										  </div>
									  </div>
								  </div>
							  </div>
						  </div>
					  </div>
				  </div>
				  </div>
			   <!--Status -->
		  
				  <div class="show-me-filter mt-20 main-heading-dash "id="status_filter">
					  <div class="drop-down-wrapper edit-filter-new-change main-heading-dash width-full">
						  <label class="font-w-600"> Status</label>
						  <div class="setup-inner-box for-protact p-0">
							  <div class="create-rflet-id-form">
								  <div class="form-group for-select-existing-doc">
									  <div class="input-group">
										  <div class="dropdown keep-inside-clicks-open">
											  <button class="dropdwn-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select Status</button>
											  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
																	  
													  <div class="for-doc-select">
														  <div class="checkbox"> 	
															   <label>
																  Active <input type="checkbox" value="active"class="status_class"name="status_name">
																  <span class="cr"><i class="cr-icon fa fa-check"></i></span>
																</label>
														  </div>	
													  </div>
													  <div class="for-doc-select">
														  <div class="checkbox"> 	
															   <label>
																  Inactive
																  <input type="checkbox" value="inactive"class="status_class"name="status_name">
																  <span class="cr"><i class="cr-icon fa fa-check"></i></span>
																</label>
														  </div>	
													  </div>	
													  <div class="for-doc-select">
														  <div class="checkbox"> 	
															   <label>
																  Block
																  <input type="checkbox" value="block"class="status_class"name="status_name">
																  <span class="cr"><i class="cr-icon fa fa-check"></i></span>
																</label>
														  </div>	
													  </div>	
												  
											  </div>
										  </div>
									  </div>
								  </div>
							  </div>
						  </div>
					  </div>
					  </div>
			  </div>


					  </div>
	                </div>
				</div>
            </div>
            <!-- <div id="div_data"> -->
			<div class="col-xl-9" id="div_data">
				<div class="personal-info-box table-responsive another-table">
					<table class="table" id="myTable3">
						<thead>
					    	<tr> 
						      	<!-- <th width="25%" scope="col">Email</th> -->
						      	<th width="15%" scope="col">MyReflet Type</th>
						      	<th width="20%" scope="col">Name</th>
						      	<th width="15%" scope="col">MyReflet Code</th>
						      	<th width="10%" scope="col">Country</th>
						      	<th width="15%" scope="col">Status</th>
					    	</tr>
					  	</thead>
						<tbody id="myTableContent">
                            <%if(reflet_id_data.length>0){
                            for(let reflet_data of reflet_id_data){    
                            %>
						    <tr class="search_tr">
						    	<!-- <td><%=reflet_data.email%></td> -->
						      	<td class="upper"><%=reflet_data.reflectid_by%></td>
							     <td class="upper">
                                    <%if(reflet_data.rep_firstname){%>
                                        <span class="font-w-600"><%=reflet_data.rep_firstname%></span>
                                <%}else if(reflet_data.entity_company_name){%>
                                    <span class="font-w-600"> <%=reflet_data.entity_company_name%> </span>

                                <%}else{%>
                                    <span class="font-w-600"> <%=decrypt(reflet_data.full_name)%> </span>
                                <%}%>
                                </td>


							    <td><%=reflet_data.reflect_code%></td>
							    <td class="upper"><%=reflet_data.country_name%></td>
								<td><span class="approved-status upper"><%=reflet_data.status%></span></td>
                            </tr>  
                            <%}}else{
	   %>
                       <tr>
						<td colspan="6"><center>No record found.</center> </td>
					   </tr>			 <%}%>
					   <tr class="tr_search">
						<td colspan="6"><center>No record found.</center> </td>
					   </tr>
						</tbody>
					</table>
				</div>
            </div>
        <!-- </div> -->
		</div>
	</div>
</section>
<!--Save Report S  -->
<div class="modal fade field-edit-modal" id="save-report" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <div class="create-wallet-box">
			<div class="row align-item-center">
				<div class="col-xl-2 col-lg-3 col-md-3">
					<div>
						<img src="../assets/images/icons/createidentity-assets/popup-upload-icon.png">
					</div>
				</div>
				<div class="col-xl-7 col-lg-7 col-md-7">
					<h5 class="heading-purple">Save Report</h5>
				</div>
			</div>
			<form method="POST" action="/save-report"id="save_validate">
				<div class="row">
					<div class="col-xl-12 col-lg-12 col-md-12 m-auto">
						<div class="setup-inner-box for-protact">
							<div class="create-rflet-id-form">
								<div class="form-group">
									<div class="input-group">
										<input type="hidden" value="<%=market_list_result[0].report_id%>" name="report_id">
										<input type="hidden" value="" id="checked_column" name="checked_column">
					                    <!-- <input type="text" value="1,2,3" id="checked_column" name="checked_column_1"> -->

									  <input type="text" id="" class="form-control" name="report_name" placeholder="Report Name"data-rule-required="true" data-msg-required="Please enter report name." >
									</div>
								</div>
								<div class="form-group">
									<div class="input-group">
									  <input type="text" class="form-control" name="description" placeholder="Description"data-rule-required="true" data-msg-required="Please enter description." >
									</div>
								</div>
								<div class="form-group">
							         
											<div class="input-group ">
												<select class="form-control mp_select valid" name="reflect_id_report" data-rule-required="true" data-msg-required="Please select sub-category." aria-invalid="false">
												
													<option>Select Reflet Code</option>
													<% if(all_reflet_code.length>0){
														for(var i=0;i<all_reflet_code.length;i++){
															%>
													<option value="<%=all_reflet_code[i].reflect_id %>">    

								                    	<%if(all_reflet_code[i].rep_firstname){%>
									                                      <span class="upper"><%=all_reflet_code[i].rep_firstname %>-   <%=all_reflet_code[i].reflect_code %>
																					</span>
									                                <%}else if(all_reflet_code[i].entity_company_name){%>
									                                        <span class="upper"><%=all_reflet_code[i].entity_company_name %>-   <%=all_reflet_code[i].reflect_code %>
																					</span>

									                                <%}else{%>
									                         <span class="upper"> <%=all_reflet_code[i].reflect_code %>
																					</span>                                <%}%>

												

												</option>
												
													<%}}%>
												
												</select>
											</div>
													<span class="success_message_span success_span"style="color:red"></span>
								</div>
							</div>

							<div >
								<button class="btn-common-new check_option hide_btn" type="submit">Save</button>
								<a class="btn-common-new hide_btn" href="">Cancel</a>
								<center><span class="loader"><img src="../assets/images/loader-3.gif"height="32" width="52"></span></center> 
							</div>
						</div>
					</div>
				 </div>
				</form>
	 	  </div>
       </div>
    </div>
  </div>
</div>
<!-- Save Report E -->

<%- include('../innerFooter')%>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css">
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
<script src="https://cdn.rawgit.com/rainabba/jquery-table2excel/1.1.0/dist/jquery.table2excel.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js"></script>

<script>
	$('#save_validate').validate({
   onfocusout: function(element) {
   this.element(element);
   },
   errorClass: 'error_validate',
   errorElement:'span',
   highlight: function(element, errorClass) {
   $(element).removeClass(errorClass);
   },
   submitHandler:function(form)
	{
	  // $('#submit_signup').attr('disabled',true);
	  form.submit();
	}
   });
	  
 </script>
<script>
$(document).ready( function () {
	$('.loader').hide();

			$('.tr_search').hide();

	$('#rowMatching').hide();
	$('#email_id_filter').hide();
	$('#reflet_id_filter').hide();
	$('#name_filter').hide();
	$('#country_filter').hide();
	$('#type_filter').hide();
	$('#status_filter').hide();
} );
</script>
<script>
	$(document).on('click.bs.dropdown.data-api', '.dropdown.keep-inside-clicks-open', function (e) {
	  e.stopPropagation();
	});
</script>
<!-- for dropdown S -->
<script>
	$(document).on('click','.drop-down-wrapper',function(){
		$(".show-me-filter").removeClass("active");
		$(".filter-custom-dropdown").removeClass("active");

		$(this).parent().toggleClass("active");
		$(this).parent().find(".hide-custom").toggleClass("active");
	});
	$(document).on('click','.close-filter',function(){
		$(this).parent().parent().parent().removeClass("active");
		$(this).parent().parent().parent().parent().removeClass("active");
	});
	$(".close-filter1").click(function(){
		$(this).parent().parent().removeClass("active");
	});

	$(".drop-down-wrapper1").click(function(){
		$(".show-me-filter").removeClass("active");
		$(".filter-custom-dropdown").removeClass("active");

		$(this).parent().parent().find(".hide-custom").toggleClass("active");
	});
</script> 
<!-- for dropdown E -->
<script>
	$("#start-date").datepicker();
	$("#end-date").datepicker();
</script>
<!-- Add Filter S -->

<!-- Add Filter E -->

<script>
	function downloadPersonal(){
			html2canvas(document.getElementById('div_data')).then(function(canvas) {
			var img = canvas.toDataURL("image/png");
			var doc = new jsPDF();
			doc.addImage(img,'JPEG',-20,15);
			doc.save('report.pdf');
			});
	}
</script>
<script>
	function printdiv(){
		
	  var restorepage = $('body').html();
		$('.nodata').hide();
	   var printcontent = $('#div_data').clone();
	   $('body').empty().html(printcontent);
	   window.print();
	   $('body').html(restorepage);
	 
	
	}
</script>

<script>
	function run_query(){
		// alert("hello");
		var checked_value=[];
		// checked_value = $('#get_column').find('input[name="column_check"]:checked').val();
		$.each($("input[name='column_check']:checked"), function(){
			checked_value.push($(this).val());
        });
		var checked_new = checked_value.join(",")
		$('#checked_column').val(checked_new);

		// alert(checked_new);
		$.ajax({
			type: "post",
			url: "/run-myreflet",
			data:{checked_new:checked_new},
			success: function (data) {
				// alert(data);
				$('#div_data').html("");
				$('#div_data').html(data);
			}
		})
	}
</script>
<script>
	function printdiv(){
		
	  var restorepage = $('body').html();
		// $('.nodata').hide();
	   var printcontent = $('#myTableData').clone();
	   $('body').empty().html(printcontent);
	   window.print();
	   $('body').html(restorepage);
	 
	
    }
    function downloadPersonal(){
			html2canvas(document.getElementById('myTableData')).then(function(canvas) {
			var img = canvas.toDataURL("image/png");
			var doc = new jsPDF();
			doc.addImage(img,'JPEG',-20,15);
			doc.save('report.pdf');
			});
	}
</script>
<script>
	$('.date_apply').click(()=>
	{
		var startDate = $(".startDate").val();
	     var endDate = $(".endDate").val();
		var date_list = $('input[name=check_date]:checked').map(function(_, el) {
        return $(el).val();
	}).get();

	var chunks = startDate.split('/');

function GetMonthName(monthNumber) {

var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];
return months[monthNumber - 1];

}
var month_num=chunks[0];

var formattedDate = [chunks[1],GetMonthName(month_num),chunks[2]].join("-");


	$('.create_class').text(formattedDate);
	// alert('startDate : '+startDate);
	// alert('endDate : '+endDate);
// alert(checked_new);
$.ajax({
			type: "post",
			url: "/get-reflet-by-time",
			data:{startDate:startDate,endDate:endDate,date_list:JSON.stringify(date_list)},
			success: function (data) {
			//	alert(data);
				$('#div_data').html("");
				$('#div_data').html(data);
			}
		})
	})
</script>

<script>
	$('.filterList').click(()=>
	{
		$('#email_id_filter').hide();
	$('#reflet_id_filter').hide();
	$('#name_filter').hide();
	$('#country_filter').hide();
	$('#type_filter').hide();
	$('#status_filter').hide();

		var client_list = $('input[name=filter_checkbox]:checked').map(function(_, el) {
        return $(el).val();
	}).get();

	// alert(client_list)
	// if(complain_list=='')
	// {
	// 	$(".complaints_by_complain_id").hide();

	// 	window.location.reload(true);

	// }
		// alert('checkss'+complain_list)
		$("#rowMatching").show();
		if(client_list[0]==='Email'||client_list[1]==='Email'||client_list[2]==='Email'||
		client_list[3]==='Email'||client_list[4]==='Email'||client_list[5]==='Email')
		{
			$('#email_id_filter').show();

		}
		if(client_list[0]==='Type'||client_list[1]==='Type'||client_list[2]==='Type'||
		client_list[3]==='Type'||client_list[4]==='Type'||client_list[5]==='Type')
		{
			$('#type_filter').show();


		}	if(client_list[0]==='Name'||client_list[1]==='Name'||client_list[2]==='Name'||
		client_list[3]==='Name'||client_list[4]==='Name'||client_list[5]==='Name')
		{
			$('#name_filter').show();

		}	if(client_list[0]==='MyReflet ID'||client_list[1]==='MyReflet ID'||client_list[2]==='MyReflet ID'||
		client_list[3]==='MyReflet ID'||client_list[4]==='MyReflet ID'||client_list[5]==='MyReflet ID')
		{
			$('#reflet_id_filter').show();

		}	
		if(client_list[0]==='Country'||client_list[1]==='Country'||client_list[2]==='Country'||
		client_list[3]==='Country'||client_list[4]==='Country'||client_list[5]==='Country')
		{
			$('#country_filter').show();

		}			
		if(client_list[0]==='Status'||client_list[1]==='Status'||client_list[2]==='Status'||
		client_list[3]==='Status'||client_list[4]==='Status'||client_list[5]==='Status')
		{
			$('#status_filter').show();

		}	
	

	})
</script>
<script>

	// filter by country
	$('.country_class').click(()=>{
		var id_list = $('input[name=country_name]:checked').map(function(_, el) {
        return $(el).val();
	}).get();

	//alert(id_list)
	if(id_list=='')
	{
		window.location.reload(true);
	}
	$.ajax({
                      type : 'POST',
                      url  : '/show-report-by-reflet-country',
					  data: {client_list:JSON.stringify(id_list),checked_new:undefined},
					  
                        success: function(data) {
							//alert(data)
							$('#div_data').html("");
				$('#div_data').html(data);
							
			}                                                    
           
})
	})
	
	
   // filter by reflect code
   $('.reflet_class').click(()=>{
		var id_list = $('input[name=reflect_code_name]:checked').map(function(_, el) {
        return $(el).val();
    	}).get();

			//alert(id_list)
			if(id_list=='')
			{
				window.location.reload(true);
			}
			$.ajax({
                      type : 'POST',
                      url  : '/show-report-by-reflet_reflect_code',
					  data: {client_list:JSON.stringify(id_list),checked_new:undefined},
					  
                        success: function(data) {
							//alert(data)
							$('#div_data').html("");
				$('#div_data').html(data);
							
			}    })                                                
           
    })
	
	// filter by name
   $('.name_class').click(()=>{
	var id_list = $('input[name=name_name]:checked').map(function(_, el) {
        return $(el).val();
    	}).get();
          var name_type=$('#name_type').val();
			// alert(name_type)
			if(id_list=='')
			{
				window.location.reload(true);
			}
			$.ajax({
                      type : 'POST',
                      url  : '/show-report-by-reflet_name',
					  data: {client_list:JSON.stringify(id_list),checked_new:undefined,name_type:name_type},
					  
                        success: function(data) {
							// alert(data)
							$('#div_data').html("");
				$('#div_data').html(data);
							
			}    })                 
	})
    // filter by type
	$('.type_class').click(()=>{
		var id_list = $('input[name=type_name]:checked').map(function(_, el) {
        return $(el).val();
    	}).get();

			//alert(id_list)
			if(id_list=='')
			{
				window.location.reload(true);
			}
			$.ajax({
                      type : 'POST',
                      url  : '/show-report-by-reflet-type',
					  data: {client_list:JSON.stringify(id_list),checked_new:undefined},
					  
                        success: function(data) {
							// alert(data)
							$('#div_data').html("");
				$('#div_data').html(data);
							
			}    })                                                
           
	})
	  // filter by status
 $('.status_class').click(()=>{
		var id_list = $('input[name=status_name]:checked').map(function(_, el) {
        return $(el).val();
    	}).get();

			//alert(id_list)
			if(id_list=='')
			{
				window.location.reload(true);
			}
			$.ajax({
                      type : 'POST',
                      url  : '/show-report-by-reflet-status',
					  data: {client_list:JSON.stringify(id_list),checked_new:undefined},
					  
                        success: function(data) {
							// alert(data)
							$('#div_data').html("");
				$('#div_data').html(data);
							
			}    })                                                
           
	})
	
</script>
<script>
    function xl_data(){
 

         
         // alert('xls')

         $("#myTableData").table2excel({
             filename: "report-list.xls",
             exclude:'.hide_data',
         });


}
</script>
<script type="text/javascript">
 $(document).ready(function(){
      $("#myInputSearch").on("keyup", function() {
		// alert('h')
							
        var check_search=0;
		var value = $(this).val().toLowerCase();
		// alert(value)
        $("#myTableContent tr").filter(function() {
			// alert($(this).text().toLowerCase().indexOf(value)===-1)
			var check=($(this).text().toLowerCase().indexOf(value)===-1);
			$(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)

	  if(check===false)
	  {
		check_search++;
		$('.tr_search').hide();

	  }
		
		}); 
		// alert(check_search)
		if(check_search==0)
		{
			$('.search_tr').hide();

			$('.tr_search').show();

		}

		// else
		// {
		// 	$('.search_tr').show();

		// 	$('.tr_search').hide();

		// }
      });
    });</script>
    <script type="text/javascript">
	var option_val;
	    $('.mp_select').click(function() {
   
  option_val = $(this).children("option:selected").val();
  // alert(option_val)

 });
	 $('.check_option').click(()=>
	   {
		// alert('option_val'+option_val)
	   
	  if(!option_val)
	   {
		// alert(option_val)
     
		   $('.success_span').html('Please Select any reflet code');
         
		   return false;
           
	   }
	   else{
		$('.hide_btn').hide();

           $('.loader').show();
				setTimeout(function() {
			$('.success_message_span').fadeOut('fast');
			}, 1000);
		return true;

	   }
	   })
	</script>