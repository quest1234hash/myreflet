<%-include('../innerHeader')%>
<style>
	.m-right-20{
		margin-right: 20px;
	}
	.another-drop-down .for-select-existing-doc.three-drop-custom .dropdwn-btn {
    min-width: 150px;
    height: 37px;
}
.select2-selection__rendered{
	background-color: transparent !important;
	border-color:#333; 
}.select2-container--default .select2-selection--single {
    background-color: transparent !important;
    border: 1px solid #aaa !important;
    border-radius: 4px;
}
.mobile-no-select .select2-container--default .select2-selection--single{
	border: 1px solid #333 !important;
}
.select2-container--default .select2-selection--single .select2-selection__rendered {
    color: #444;
    line-height: 28px;
    font-size: 14px;
    font-weight: 500;
    color: #000;
}
</style>

<section class="heading-sec mb-0">
	<div class="container">
		<ul class="breadcrumb custom-braed">
			<li class="upper">Manage Message</li>
		</ul>
		<div class="row align-item-center">
			<div class="col-lg-9 col-md-6 col-sm-6">
				<div class="main-heading-dash">
					<img src="../assets/images/icons/dashboard-assets/icon_message1.png">
					<h4 class="upper">Manage Message</h4>
				</div>
			</div>
		</div>
	</div> 
</section>
<section class="heading-sec">
	<div class="container">
		<div class="row align-item-center">
			<div class="col-lg-12">
				<div class="custom-space-btw another-drop-down m-top-30  sp-dropdwon">
					
					<div class="for-select-existing-doc three-drop-custom">
						
					    <div class="input-group">
							<div class="dropdown keep-inside-clicks-open">
							<h3 class="small-title">Select Client</h3>

								<button class="dropdwn-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								    All
								</button>
								<div class="dropdown-menu" aria-labelledby="dropdownMenuButton" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 20px, 0px);">
								    <div class="for-doc-select">
								    	<div class="checkbox"> 	
								        	<label>
								          		All
								            	<input type="checkbox" value="">
								            	<span class="cr"><i class="cr-icon fa fa-check"></i></span>
								          	</label>
								        </div>	
								    </div>
								   <%	if(my_client.length>0)
									{
									
										for(let each_data of my_client){
										  %>
								    <div class="for-doc-select">
								    	<div class="checkbox"> 	
								         	<label>
									         
												           <%=decrypt( each_data.full_name )%>
		                                            <input type="checkbox" name="name_check"value="<%=each_data.reg_user_id%>"class="checkbox_my_client ">									       
		                                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
								          	</label>
								        </div>	
								    </div>

								    <%}}%>
								    
								</div>
							</div>
						</div>

					    <div class="input-group">
							<div class="dropdown keep-inside-clicks-open">
								<h3 class="small-title">Select MyReflet Id</h3>
								<button class="dropdwn-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								    All
								</button>
								<div class="dropdown-menu" aria-labelledby="dropdownMenuButton" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 20px, 0px);">
								    <div class="for-doc-select">
								    	<div class="checkbox"> 	
								        	<label>
								          		All
								            	<input type="checkbox" value="">
								            	<span class="cr"><i class="cr-icon fa fa-check"></i></span>
								          	</label>
								        </div>	
								    </div>
								     <%	if(my_verifiers.length>0)
									{
									
										for(let each_data of my_verifiers){
										  %>
								    <div class="for-doc-select">
								    	<div class="checkbox"> 	
								         	<label>
									          	<%if(each_data.rep_firstname){%>


														<%= each_data.rep_firstname %> - <%= each_data.reflect_code %>		 <%}else if(each_data.entity_company_name){%>

		                                         <%= each_data.entity_company_name %> - <%= each_data.reflect_code %>
		                                         <%}else{%>
												           <%= decrypt(each_data.full_name) %> - <%=     each_data.reflect_code %>
										            <%}%>
		                                            <input type="checkbox" name="status_check"value="<%=each_data.reflect_id%>"class="checkbox_my_verifier ">									       
		                                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
								          	</label>
								        </div>	
								    </div>

								    <%}}%>
								   
								</div>
							</div>
						</div>
						<!-- <div class="input-group">
							<label for="from">From</label>
                             <input class="form-control" type="text" id="from" name="from">
						</div>
						<div class="input-group">
							<label for="to">to</label>
                            <input class="form-control" type="text" id="to" name="to">
						</div> -->

						<div class="input-group" >
							<h3 class="small-title">Select Date Range</h3>

							<div class="show-me-filter"style="width:
							90%">

	                  		<div class="drop-down-wrapper">
	                  			<span style="font-size: 14px;">Date Range</span>
	                  		</div>
	                  		<div class="filter-custom-dropdown hide-custom">
	                  			<ul>
	                  				<li>
			            				<label class="font-w-600">Filter by Date </label>
			        					<span class="close-filter">X</span>
			        				</li>
	                  			</ul>
	                  			<div class="setup-inner-box for-protact p-0">
		                  			<div class="create-rflet-id-form">
										<div class="form-group">
											<div class="input-group">
											  <input type="text" id="start-date" class="form-control startDate" placeholder="Start Date">
											</div>
										</div>
										<div class="form-group">
											<div class="input-group">
											  <input type="text" id="end-date" class="form-control endDate" placeholder="End Date">
											</div>
										</div>
										<div class="text-right">
											<button class="btn-common-new small-btn close-filter date_apply">Apply</button>	
										</div>
									</div>
								</div>
	                  		</div>
	                  	</div>

						</div>
							<div class="input-group" >
							<h3 class="small-title">Send message to client</h3>

							<div class="show-me-filter"style="width:
							90%">

	                  		<div class="drop-down-wrapper">
	                  			<span style="font-size: 14px;">Please Select</span>
	                  		</div>
	                  		<div class="filter-custom-dropdown hide-custom">
	                  			<ul>
	                  				<li>
	                  				<span class="close-filter">X</span>

			            				<label class="font-w-600">Select verifier & client for message </label>
			        				</li>
	                  			</ul>
	                  			<div class="setup-inner-box for-protact p-0">
	                  					<h6 class="error_span"style="color:red"></h6>

		                  			<div class="create-rflet-id-form">

										<div class="form-group">
											<div class="input-group-prepend mobile-no-select ">
							      <select class="form-control select2-clientt "id="client_id" name="client_id">
							      										  
                             <option value="">Select Client</option>
							      	
                                   <%if(all_client.length>0){%>
									<%all_client.forEach(each_data=>{%>
                         
                                
                                     <%if(each_data.rep_firstname){%>
								  <option value="<%=each_data.reflect_id%>">
								  
								  	<%=each_data.rep_firstname%>-<%=each_data.reflect_code%>
                                </option>
                                <%}else if(each_data.entity_company_name){%>
								<option value="<%=each_data.reflect_id%>">
									
							         <%= each_data.entity_company_name %>-<%=each_data.reflect_code%>
								 
                                </option>
                                        
                                         <%}else{%>
                                         <option value="<%=each_data.reflect_id%>">
							          <%= decrypt(each_data.full_name) %>-<%=each_data.reflect_code%>
                                </option>

                              
                               <%}%>
                              

                                      
									<%})%>
								<%}%>  
							      
							      </select>
							  </div>
											
										</div>
										<div class="form-group">
											<div class="input-group-prepend mobile-no-select ">
							      <select class="form-control select2-verifierr  "id="verifier_reflect_id"  name="verifier_reflect_id">
							      										  
                             <option value="">Select Your Verifier</option>
							      	
                                   <%if(verifier_array.length>0){%>
									<%verifier_array.forEach(each_data=>{%>
                              <%if(each_data.rep_firstname){%>
								  <option value="<%=each_data.reflect_id%>">
								  
								  	<%=each_data.rep_firstname%>-<%=each_data.reflect_code%>
                                </option>
                                <%}else if(each_data.entity_company_name){%>
								<option value="<%=each_data.reflect_id%>">
									
							         <%= each_data.entity_company_name %>-<%=each_data.reflect_code%>
								 
                                </option>
                                        
                                         <%}else{%>
                                         <option value="<%=each_data.reflect_id%>">
							          <%= decrypt(each_data.full_name) %>-<%=each_data.reflect_code%>
                                </option>

                              
                               <%}%>

                                      
									<%})%>
								<%}%>  
							      
							      </select>
							  </div>
										</div>
										<div class="text-right">
											<button class="btn-common-new small-btn close-filter apply_create_msg">Apply</button>	
										</div>
									</div>
								</div>
	                  		</div>
	                  	</div>
	                  	
						</div>
					</div>
					<div class="responsive-search ">
						<form class="response-search mt-30"> 
		                     <div class="input-group search-address-book">
		                     <input type="text" class="form-control autocomplete" id="myInputSearch" placeholder="Search" >
		                        <div class="input-group-append">
		                            <button class="btn btn-search" type="button"><img src="../assets/images/icons/search-black.png"></button>
		                        </div>
		                    </div>
	                  	</form>
					</div>
				</div>

				<div class="custom-space-btw another-drop-down m-top-30 align-items-end">
					
<!-- 
					<div class="for-select-existing-doc">
					    <div class="input-group">
							<div class="dropdown keep-inside-clicks-open">
								<h3 class="small-title">MyReflet ID</h3>
								<button class="dropdwn-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								    All
								</button>
								<div class="dropdown-menu" aria-labelledby="dropdownMenuButton" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 20px, 0px);">
								    <div class="for-doc-select">
								    	<div class="checkbox"> 	
								        	<label>
								          		All
								            	<input type="checkbox" value="">
								            	<span class="cr"><i class="cr-icon fa fa-check"></i></span>
								          	</label>
								        </div>	
								    </div>
								    <%	if(my_verifiers.length>0)
									{
									
										for(let each_data of my_verifiers){
										  %>
								    <div class="for-doc-select">
								    	<div class="checkbox"> 	
								         	<label>
									          	<%if(each_data.rep_firstname){%>


														<%= each_data.rep_firstname %> - <%= each_data.reflect_code %>		 <%}else if(each_data.entity_company_name){%>

		                                         <%= each_data.entity_company_name %> - <%= each_data.reflect_code %>
		                                         <%}else{%>
												           <%= each_data.full_name %> - <%= each_data.reflect_code %>
										            <%}%>
		                                            <input type="checkbox" name="status_check"value="<%=each_data.reflect_id%>"class="checkbox_my_verifier ">									       
		                                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
								          	</label>
								        </div>	
								    </div>

								    <%}}%>
								   
								</div>
							</div>
						</div>
					</div>
 -->
					
				</div>
						     
						</div>
					</section>
<section class="setup-id-sec">
	<div class="container">
		<div class="row personal-info-heading">
			<div class="col-md-12 custom-flex-row">
				<div class="text-right">
					<a href="">
						<div class="icon-for-dwnload">
							<div class="tooltip fade" data-title="Export Data" onclick="export_table();">
								<img src="../assets/images/icons/dashboard-assets/export.png">
						     	<img class="info-icon" src="../assets/images/icons/dashboard-assets/info-icon.png">
							</div>
						</div>
					</a>
					<a href="">
						<div class="icon-for-dwnload">
							<div class="tooltip fade" data-title="Print Data"onclick="print_table();">
								<img src="../assets/images/icons/dashboard-assets/print.png">
							    <img class="info-icon" src="../assets/images/icons/dashboard-assets/info-icon.png">
							</div>
						</div>
					</a>
				</div>
			</div>
		</div>

		<!-- Button S-->
		<!-- <div class="btn-all-dwnload">
			<div>
				<a href=""><img src="../assets/images/icons/dashboard-assets/icon_add_book.png"> Add to address book</a>
				<a href=""><img src="../assets/images/icons/dashboard-assets/icon_send.png"> Send on-boarding documents</a>
				<a href=""><img src="../assets/images/icons/dashboard-assets/icon_eye_pur.png"> View Document</a>
				<a href=""><img src="../assets/images/icons/dashboard-assets/icon_message.png"> Manage messages</a>
			</div> 
		</div> -->
		<!-- Button E -->
		<% if(success_msg!=undefined && success_msg !='' ){ %>
			<div class="alert alert-success text-center  flash_msg "id="success_message">
			  <%= success_msg %>
		   </div>
		  <% }%>
		  <% if(err_msg!=undefined && err_msg !='' ){ %>
			<div class="alert alert-danger text-center  flash_msg " id="err_message">
					<%= err_msg %>
				 </div>
		   
			<% }%>
		<div class="personal-info-box table-responsive">
			<table class="table" id="myTable3">

				<thead>
			    		<tr>
			    		<th width="5%" scope="col">No.</th>
				      	<th width="20%" scope="col">MyReflete ID</th>
				      	<th width="20%" scope="col">Client</th>

				      	<th width="25%" scope="col">Message</th>
				      	<!-- <th width="15%" scope="col">Status</th> -->

				      	<th width="15%" scope="col">Created At</th>
				      	<th width="15%"class="hide_link" scope="col">View Messages</th>
			    	</tr>
			  	</thead>
				<tbody id="div_data">
					<%	if(verifiers_message_list.data.length>0)
		  	{
			var i=0;
			var j=0;
			var k=1;
				for(let each_data of verifiers_message_list.data){
				  %>
				    <tr>
				    	<td class="upper"><%=k%>.</td>
				      	<th scope="row">
					      	<div class="for-flex-align">
					      		<div class="checkbox">
						          	<label>
							            <!-- <input class="hide_link" type="checkbox" value=""> -->
<!-- 							            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
 -->					      		     	<div>
					      		     		<span class="upper">
					      		     			<%if(each_data.rep_firstname){%>
					      		     			<%=each_data.rep_firstname%>
					      		     				<%}else if(each_data.entity_company_name){%>

                                         <%= each_data.entity_company_name %>
                                         <%}else{%>
										           <%= decrypt(each_data.full_name) %>
										           <%}%>
					      		     			</span><br>
					      		     		<span><%=each_data.reflect_code%></span>
					      		     	</div>
						         	 </label>
						        </div>
							</div>
						  </th>

					<!-- 	  <%if(each_data.rep_email)
						  {%>
							<td><%=each_data.rep_email%></td>

							<%}else{%> 
                         <td> <%=each_data.email%>
							
                      </td>
								<%}%> -->
				        <td class="upper"><%=decrypt(each_data.full_name)%> <%=decrypt(each_data.last_name)%>
				        	

				        </td>

				        <td class="upper">
                                
                                          <%if(each_data.message_data=='undefined'){%>
                                                      -------
                                         <%}else{%>
                                               
					      		     			<%=each_data.message_data[0].message%>
                                               <%if(each_data.message_data[0].seen_status=='unread' && each_data.message_data[0].sender_user_id!=user_id){%>
                                       
                                             
                                               <span id=""class="new-msg-red-dot "></span>
                                               <%}%>
                                          <%}%>
				        </td>

					    <!-- <td class="upper"><%=each_data.verifier_type%></td> -->
                        <td>
                        <p>


                          <%if(each_data.message_data=='undefined'){%>
                                                             	<%=moment(each_data.created_at).format('MMM DD, YYYY')%>

                                         <%}else{%>
                                               
					      		     			
                                                                       	<%=moment(each_data.message_data[0].msg_date).format('MMM DD, YYYY')%>

                                          <%}%>
                               </p></td>
					    <td class="hide_link" >
					    	
					      <a class="dropdown-item" href="/manage-client-to-verifier-message?request_msg_id=<%=each_data.request_msg_id%>&reflect_id=<%=each_data.reflect_id%>">
										<i class="cr-icon fa fa-eye"></i>
									</a>	
				      	</td>
				    </tr> 
				   
					<%
					i++;k++;		j++;				
				} 
				   }else{
	   %>
                       <tr>
						<td colspan="8"><center>No record found.</center> </td>
					   </tr>			 <%}%>
				</tbody>
			</table>
		
			   </div>
            <div class="pagination-list for-user">
          
            <% if (verifiers_message_list.totalPages > 0) { %>
             <ul class="pagination text-center">
               <% if (verifiers_message_list.currentPage == 1) { %>
                 <li class="disabled page-item"><a class="page-link">&lt;</a></li>
               <% } else { %>
                 <li class="page-item"><a class="page-link" href="/manage-message-list">&lt;</a></li>
               <% } %>
          
          
          
               <% var i = (Number(verifiers_message_list.currentPage) > 5 ? Number(verifiers_message_list.currentPage) - 4 : 1) %>
               <% if (i !== 1) { %>
                 <!-- <li class="disabled"><a>...</a></li> -->
                 <li class="page-item disabled"><a class="page-link" >...</a></li>
               <% } %>
               <% for (; i <= (Number(verifiers_message_list.currentPage) + 4) && i <= verifiers_message_list.totalPages; i++) { %>
                 <% if (i == verifiers_message_list.currentPage) { %>
                   <!-- <li class="active"><a><%= i %></a></li> -->
                   <li class="page-item active">
                   <a class="page-link" href="#"><%= i %><span class="sr-only">(verifiers_message_list.currentPage)</span></a>
                   </li>
                 <% } else { %>
                   <li class="page-item"><a class="page-link" href="/manage-message-list"><%= i %></a></li>
                 <% } %>
                 <% if (i == Number(verifiers_message_list.currentPage) + 4 && i < verifiers_message_list.totalPages) { %>
                   <!-- <li class="disabled"><a>...</a></li> -->
                   <li class="page-item disabled"><a class="page-link" >...</a></li>
                 <% } %>
               <% } %>
          
          
               <% if (verifiers_message_list.currentPage == verifiers_message_list.totalPages) { %>                       
                 <li class="disabled page-item"><a class="page-link">&gt;</a></li>
               <% } else { %>
                 <li><a class="page-link" href="/manage-message-list">&gt;</a></li>
               <% } %>
          
             </ul>
          <% } %>
          
           </div>
		</div>
	</div>
</section>

<!-- Modal S -->


<!--Add Verifier Modal E -->

<%- include('../innerFooter')%>
<!-- <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css"> -->
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
<script src="https://cdn.rawgit.com/rainabba/jquery-table2excel/1.1.0/dist/jquery.table2excel.min.js"></script>
 <link rel="stylesheet" type="text/css" href="assets/css/select2.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.8/js/select2.min.js" defer></script>
<script>
	$(document).ready(function() {
                $(".select2-client").select2();

                $(".select2-verifier").select2();
         });
	$('.cancel').click(function()
{
	location.reload();

})
// $(document).ready( function () {
// 	$('.table').DataTable();
// } );
</script>
<script>
	$(document).on('click.bs.dropdown.data-api', '.dropdown.keep-inside-clicks-open', function (e) {
	  e.stopPropagation();
	});
</script> 
<script>
	$(document).on('click','.drop-down-wrapper',function(){
		$(".show-me-filter").removeClass("active");
		$(".filter-custom-dropdown").removeClass("active");

		$(this).parent().toggleClass("active");
		$(this).parent().find(".hide-custom").toggleClass("active");
	});
	$(document).on('click','.close-filter',function(){
		$(this).parent().parent().parent().removeClass("active");
		$(this).parent().parent().parent().parent().removeClass("active");
	});
	$(".close-filter1").click(function(){
		$(this).parent().parent().removeClass("active");
	});

	$(".drop-down-wrapper1").click(function(){
		$(".show-me-filter").removeClass("active");
		$(".filter-custom-dropdown").removeClass("active");

		$(this).parent().parent().find(".hide-custom").toggleClass("active");
	});
</script> 
<!-- for dropdown E -->
<script>
	$("#start-date").datepicker();
	$("#end-date").datepicker();
</script>
<!-- Add Filter S -->


<script>
		function export_table(){
	//   alert('hhh') 
	// $('.hide_link').show();

	  $("#myTable3").table2excel({
		  filename: "access-market-list.xls",
		  exclude:'.hide_link',
	  });
	//   $('.hide_link').show();
	window.location.reload(true);

	};
	
	function print_table(){
		$('.hide_link').hide();
     
     // $("#user_div").print();
     var restorepage = $('body').html();
  // $('.nodata').hide();
   var printcontent = $('#myTable3').clone();
   $('body').empty().html(printcontent);
   window.print();
   $('body').html(restorepage);
 
   window.location.reload(true);

		}  
		setTimeout(function() {
        $('#success_message').fadeOut('fast');
        }, 3000);
		setTimeout(function() {
        $('#err_message').fadeOut('fast');
        }, 3000);
</script>
<script>

// $('.get_category_1').click(function(){
// 		// alert('ref_id')

// 		var ref_id = $("#ref_id").val();
// 		// alert(ref_id)
// 	if(ref_id!=""){
// 		$.ajax({
// 			type: "post",
// 			url: "/get-category-list",
// 			data:{reflect_id:ref_id},
// 			success: function (data) {
// 				alert(data);  
// 				$('#category_list_1').html(data);
			
//             }
// 		});
// 	}else{
// 				$('#category_list_1').html("");
// 	}
// })
</script>
<script>
	// var reflect_id


// $(document).on('change', ".mp_select", function(){
// 	reflect_id =   $(this).val()
// });

// $(document).on('change', ".mp_select", function(){
// 	reflect_id =   $(this).val()
// });
$('.reflect_code_1').click(function()
{
	// alert('mp_id')

	var label = $("#label_id").val();
	var reflect_code = $("#reflect_code").val();

// alert(label)
// alert(reflect_code)





	  

	  $.ajax({
  type: "post",
  url: "/post-address-book",
  data:{reflect_code:reflect_code,label:label},
  success: function (data) {
	  
	  location.reload();

  
  }
});
})


</script>

<script>
	$('.date_apply').click(()=>
	{
		var startDate = $(".startDate").val();
	     var endDate = $(".endDate").val();
		var date_list = $('input[name=check_date]:checked').map(function(_, el) {
        return $(el).val();
	}).get();

	var chunks = startDate.split('/');

function GetMonthName(monthNumber) {

var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];
return months[monthNumber - 1];

}
var month_num=chunks[0];

// alert(chunks[1])

var formattedDate = [chunks[1],GetMonthName(month_num),chunks[2]].join("-");


	$('.create_class').text(formattedDate);
	// alert('startDate : '+startDate);
	// alert('endDate : '+endDate);
$.ajax({
			type: "post",
			url: "/search-msg-by-date",
			data:{startDate:startDate,endDate:endDate,date_list:JSON.stringify(date_list)},
			success: function (data) {
				// alert(data)
				$('#div_data').html("");
				$('#div_data').html(data);
			}
		})
	})
</script>
<script type="text/javascript">
	$('.checkbox_my_verifier').click(function() {
		// var userid = `${ userid}`
		// $('.complaints_by_status_list').html(" ")
		$(".all_list").hide();

    var reflect_list = $('input[name=status_check]:checked').map(function(_, el) {
        return $(el).val();
	}).get();
	if(reflect_list=='')
	{
		// $(".complaints_by_status_list").hide();

		window.location.reload(true);

	}
 // alert("check box select value : "+status_list) 
	$.ajax({
                      type : 'POST',
                      url  : '/search-msg-by-my-verifier',
					  data: {reflect_list:JSON.stringify(reflect_list)},
					  
                        success: function(data) {
				// alert(data)

							$('#div_data').html("");
			            	$('#div_data').html(data);
						
			}                                                    
           
})
})
	$('.checkbox_my_client').click(function() {
		// var userid = `${ userid}`
		// $('.complaints_by_status_list').html(" ")
		$(".all_list").hide();

    var reflect_list = $('input[name=name_check]:checked').map(function(_, el) {
        return $(el).val();
	}).get();
	if(reflect_list=='')
	{
		// $(".complaints_by_status_list").hide();

		window.location.reload(true);

	}
 // alert("check box select value : "+reflect_list) 
	$.ajax({
                      type : 'POST',
                      url  : '/search-msg-by-my-client',
					  data: {reflect_list:JSON.stringify(reflect_list)},
					  
                        success: function(data) {
				// alert(data)

							$('#div_data').html("");
			            	$('#div_data').html(data);
						
			}                                                    
           
})
})
</script>
<script type="text/javascript">
	$(document).ready( function () {

		  $("#myInputSearch").on("keyup", function() {

            var value = $(this).val().toLowerCase();
            // alert(value)
            if(value){
            $.ajax({
		type: "post",
		url: "/search-msg-data",
		data:{query:value},
		success: function (data) {
			// alert(data);
			
			     $('#div_data').html("");
			            	$('#div_data').html(data);
						
			
	
		
		}
	})
    }else{
	     location.reload(true)}
	})
		})
</script>

<script type="text/javascript">
	
	$('.apply_create_msg').click(function() {

		var verifier_reflect_id = $('#verifier_reflect_id').find(":selected").val();
        var client_id = $('#client_id').find(":selected").val();

            // alert(verifier_reflect_id)
            // alert(client_id)

			if(client_id==''|| verifier_reflect_id=='')
			{
				// $(".complaints_by_status_list").hide();
		     $('.error_span').html('Please fill all the fields');
            
					return false;
             
	       }
	       else{
	   	      setTimeout(function() {
				    $('.error_span').fadeOut('fast');
					}, 3000);
		
              window.location= window.location.href=`/create-message-request-by-reflectId?reflect_id=${verifier_reflect_id}&client_id=${client_id}`;
		}
})
</script>